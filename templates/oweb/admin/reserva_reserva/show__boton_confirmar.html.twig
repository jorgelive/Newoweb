{% set s = object.fechahorainicio %}
{% set e = object.fechahorafin %}
{% set sameYear  = (s|date('Y')) == (e|date('Y')) %}
{% set sameMonth = (s|date('Y-m')) == (e|date('Y-m')) %}

{% if object.idiomatelefono == 'en' %}
    {# EN: Oct 25 â†’ 30, 2025 | Oct 25 â†’ Nov 2, 2025 | Dec 30, 2025 â†’ Jan 2, 2026 #}
    {% if sameYear and sameMonth %}
        {% set rangeStr = s|format_datetime(locale='en', pattern='MMM d') ~ ' â†’ ' ~ e|format_datetime(locale='en', pattern='d') ~ ', ' ~ e|format_datetime(locale='en', pattern='y') %}
    {% elseif sameYear %}
        {% set rangeStr = s|format_datetime(locale='en', pattern='MMM d') ~ ' â†’ ' ~ e|format_datetime(locale='en', pattern='MMM d') ~ ', ' ~ e|format_datetime(locale='en', pattern='y') %}
    {% else %}
        {% set rangeStr = s|format_datetime(locale='en', pattern='MMM d, y') ~ ' â†’ ' ~ e|format_datetime(locale='en', pattern='MMM d, y') %}
    {% endif %}

    {% set whatsappText %}
*Hello {{ object.primernombre }}, this is Susan, Reservations Manager at Centro Cusco Inti (Cusco, Peru).*

ğŸ“… *Your stay:* *{{ rangeStr }}*
ğŸ·ï¸ *Booked via:* *Bookingâ€¤com*

ğŸ”— *Full reservation details (matches â€œView apartment infoâ€ in the Bookingâ€¤com app):*

ğŸ‘‰ *{{ url('admin_app_oweb_reservareserva_resumen', {'id': object.id, 'token': object.token}) }}*

*What youâ€™ll see there:*
ğŸ–¼ï¸ *Photos of the apartment*
ğŸ›ï¸ *Layout & bed sizes*
ğŸ§´ *Amenities and whatâ€™s included*
ğŸ“ *Exact location (map)*
ğŸ“˜ *House rules & policies*

ğŸ“„ *Important:* Please send us your *Bookingâ€¤com PDF confirmation*.
*How to get it:* Bookingâ€¤com app â†’ your reservation â†’ *Options â†’ Download for offline use*.

ğŸ“ *We also sent you a message through the Bookingâ€¤com system with important instructions. Please review it carefully.*

ğŸ’³ *Prepayment:* *The amount equals the first night* (per Bookingâ€¤com policies).
*You can pay via:* ğŸ¦ Transfer Â· ğŸ’¸ Western Union Â· ğŸ’³ Credit card (secure link)

âœ… *Next step:* Once you confirm everything looks correct, please proceed with the prepayment.
    {% endset %}

{% elseif object.idiomatelefono == 'pt' %}
    {# PT: 25 â†’ 30 de out de 2025 | 25 de out â†’ 2 de nov de 2025 | 30 de dez de 2025 â†’ 2 de jan de 2026 #}
    {% if sameYear and sameMonth %}
        {% set rangeStr = s|format_datetime(locale='pt', pattern='d') ~ ' â†’ ' ~ e|format_datetime(locale='pt', pattern='d') ~ ' de ' ~ e|format_datetime(locale='pt', pattern='MMM') ~ ' de ' ~ e|format_datetime(locale='pt', pattern='y') %}
    {% elseif sameYear %}
        {% set rangeStr = s|format_datetime(locale='pt', pattern='d') ~ ' de ' ~ s|format_datetime(locale='pt', pattern='MMM') ~ ' â†’ ' ~ e|format_datetime(locale='pt', pattern='d') ~ ' de ' ~ e|format_datetime(locale='pt', pattern='MMM') ~ ' de ' ~ e|format_datetime(locale='pt', pattern='y') %}
    {% else %}
        {% set rangeStr = s|format_datetime(locale='pt', pattern='d \'de\' MMM \'de\' y') ~ ' â†’ ' ~ e|format_datetime(locale='pt', pattern='d \'de\' MMM \'de\' y') %}
    {% endif %}

    {% set whatsappText %}
*OlÃ¡ {{ object.primernombre }}, aqui Ã© a Susan, gerente de reservas do Centro Cusco Inti (Cusco, Peru).*

ğŸ“… *Sua estadia:* *{{ rangeStr }}*
ğŸ·ï¸ *Reservado via:* *Bookingâ€¤com*

ğŸ”— *Detalhes completos da reserva (igual a â€œVer informaÃ§Ãµes do apartamentoâ€ no app do Bookingâ€¤com):*

ğŸ‘‰ *{{ url('admin_app_oweb_reservareserva_resumen', {'id': object.id, 'token': object.token}) }}*

*VocÃª verÃ¡:*
ğŸ–¼ï¸ *Fotos do apartamento*
ğŸ›ï¸ *Planta/disposiÃ§Ã£o e tamanhos de cama*
ğŸ§´ *Comodidades e o que estÃ¡ incluÃ­do*
ğŸ“ *LocalizaÃ§Ã£o exata (mapa)*
ğŸ“˜ *Regras da casa e polÃ­ticas*

ğŸ“„ *Importante:* Por favor, envie o *PDF de confirmaÃ§Ã£o do Bookingâ€¤com*.
*Como obter:* App Bookingâ€¤com â†’ sua reserva â†’ *OpÃ§Ãµes â†’ Baixar para uso offline*.

ğŸ“ *TambÃ©m enviamos uma mensagem pelo Bookingâ€¤com com instruÃ§Ãµes importantes. Revise com atenÃ§Ã£o, por favor.*

ğŸ’³ *PrÃ©-pagamento:* *Corresponde ao valor da primeira noite* (polÃ­ticas do Bookingâ€¤com).
*Formas de pagamento:* ğŸ¦ TransferÃªncia Â· ğŸ’¸ Western Union Â· ğŸ’³ CartÃ£o (link seguro)

âœ… *PrÃ³ximo passo:* ApÃ³s confirmar que estÃ¡ tudo correto, prossiga com o prÃ©-pagamento.
    {% endset %}

{% elseif object.idiomatelefono == 'fr' %}
    {# FR: 25 â†’ 30 oct. 2025 | 25 oct. â†’ 2 nov. 2025 | 30 dÃ©c. 2025 â†’ 2 janv. 2026 #}
    {% if sameYear and sameMonth %}
        {% set rangeStr = s|format_datetime(locale='fr', pattern='d') ~ ' â†’ ' ~ e|format_datetime(locale='fr', pattern='d MMM y') %}
    {% elseif sameYear %}
        {% set rangeStr = s|format_datetime(locale='fr', pattern='d MMM') ~ ' â†’ ' ~ e|format_datetime(locale='fr', pattern='d MMM y') %}
    {% else %}
        {% set rangeStr = s|format_datetime(locale='fr', pattern='d MMM y') ~ ' â†’ ' ~ e|format_datetime(locale='fr', pattern='d MMM y') %}
    {% endif %}

    {% set whatsappText %}
*Bonjour {{ object.primernombre }}, ici Susan, responsable des rÃ©servations au Centro Cusco Inti (Cusco, PÃ©rou).*

ğŸ“… *Votre sÃ©jour :* *{{ rangeStr }}*
ğŸ·ï¸ *RÃ©servÃ© via :* *Bookingâ€¤com*

ğŸ”— *DÃ©tails complets de la rÃ©servation (comme â€œVoir les infos de lâ€™appartementâ€ dans lâ€™app Bookingâ€¤com) :*

ğŸ‘‰ *{{ url('admin_app_oweb_reservareserva_resumen', {'id': object.id, 'token': object.token}) }}*

*Vous y verrez :*
ğŸ–¼ï¸ *Photos de lâ€™appartement*
ğŸ›ï¸ *Agencement et tailles des lits*
ğŸ§´ *Ã‰quipements et inclusions*
ğŸ“ *Localisation exacte (carte)*
ğŸ“˜ *RÃ¨glement intÃ©rieur et politiques*

ğŸ“„ *Important :* Merci de nous envoyer le *PDF de confirmation Bookingâ€¤com*.
*Comment lâ€™obtenir :* Appli Bookingâ€¤com â†’ votre rÃ©servation â†’ *Options â†’ TÃ©lÃ©charger pour une utilisation hors ligne*.

ğŸ“ *Nous vous avons aussi envoyÃ© un message via Bookingâ€¤com avec des instructions importantes. Merci de le lire attentivement.*

ğŸ’³ *Acompte :* *Montant Ã©quivalent Ã  la premiÃ¨re nuit* (politiques de Bookingâ€¤com).
*Modes de paiement :* ğŸ¦ Virement Â· ğŸ’¸ Western Union Â· ğŸ’³ Carte (lien sÃ©curisÃ©)

âœ… *Ã‰tape suivante :* AprÃ¨s avoir confirmÃ© que tout est correct, veuillez procÃ©der au paiement de lâ€™acompte.
    {% endset %}

{% else %}
    {# ES: 25 â†’ 30 oct 2025 | 25 oct â†’ 2 nov 2025 | 30 dic 2025 â†’ 2 ene 2026 #}
    {% if sameYear and sameMonth %}
        {% set rangeStr = s|format_datetime(locale='es', pattern='d') ~ ' â†’ ' ~ e|format_datetime(locale='es', pattern='d MMM y') %}
    {% elseif sameYear %}
        {% set rangeStr = s|format_datetime(locale='es', pattern='d MMM') ~ ' â†’ ' ~ e|format_datetime(locale='es', pattern='d MMM y') %}
    {% else %}
        {% set rangeStr = s|format_datetime(locale='es', pattern='d MMM y') ~ ' â†’ ' ~ e|format_datetime(locale='es', pattern='d MMM y') %}
    {% endif %}

    {% set whatsappText %}
*Hola {{ object.primernombre }}, le saluda Susan, encargada de reservas de Centro Cusco Inti (Cusco, PerÃº).*

ğŸ“… *Su estadÃ­a:* *{{ rangeStr }}*
ğŸ·ï¸ *Reservado vÃ­a:* *Bookingâ€¤com*

ğŸ”— *Detalles completos de su reserva (igual a â€œVer info del apartamentoâ€ en la app de Bookingâ€¤com):*

ğŸ‘‰ *{{ url('admin_app_oweb_reservareserva_resumen', {'id': object.id, 'token': object.token}) }}*

*AllÃ­ verÃ¡:*
ğŸ–¼ï¸ *FotografÃ­as del departamento*
ğŸ›ï¸ *DistribuciÃ³n y tamaÃ±os de cama*
ğŸ§´ *Servicios y lo incluido*
ğŸ“ *UbicaciÃ³n exacta (mapa)*
ğŸ“˜ *Reglamento de la casa y polÃ­ticas*

ğŸ“„ *Importante:* Por favor, envÃ­enos el *PDF de confirmaciÃ³n de Bookingâ€¤com*.
*CÃ³mo obtenerlo:* App de Bookingâ€¤com â†’ su reserva â†’ *Opciones â†’ Descargar para usar sin conexiÃ³n*.

ğŸ“ *TambiÃ©n le enviamos un mensaje por el sistema de Bookingâ€¤com con instrucciones importantes. Le agradeceremos revisarlo.*

ğŸ’³ *Prepago:* *Equivale al monto de la primera noche* (polÃ­ticas de Bookingâ€¤com).
*Puede pagar por:* ğŸ¦ Transferencia Â· ğŸ’¸ Western Union Â· ğŸ’³ Tarjeta (enlace seguro)

âœ… *Siguiente paso:* Una vez confirme que todo estÃ¡ correcto, por favor proceda con el prepago.
    {% endset %}
{% endif %}

<a href="https://wa.me/{{ object.telefononormalizado }}?text={{ whatsappText|raw_url_encode }}"
   target="_blank" class="btn-60m btn btn-sm btn-warning edit_link">
    <i class="fas fa-check-circle" aria-hidden="true"></i>
    Confirmar (Booking)
</a>
