{% macro whatsappText(resumen, object) %}
    {% set text = '' %}

    {# -------------------- ALOJAMIENTOS -------------------- #}
    {% if resumen.alojamientos is defined %}
        {% for alojamiento in resumen.alojamientos %}
            {% if alojamiento.tipoTarifa.id != constant('App\\Entity\\ServicioTipotarifa::DB_VALOR_NORMAL') %}
                {% set text = text ~ '*(' ~ alojamiento.tipoTarifa.titulo ~ ')* ' %}
            {% endif %}
            {% set text = text ~ 'üè® *' ~ alojamiento.duracionStr ~ ' de ' ~ alojamiento.titulo ~ '*\n' %}
            {% if alojamiento.tarifaTitulo is defined %}
                {% set text = text ~ 'üìç en ' ~ alojamiento.tarifaTitulo ~ '\n' %}
            {% endif %}
            {% if object.file.catalogo != true %}
                {% set text = text ~ 'üóìÔ∏è del ' ~ alojamiento.fechaInicio|date('d/m/Y') ~ ' al ' ~ alojamiento.fechaFin|date('d/m/Y') ~ '\n' %}
            {% endif %}
            {% if alojamiento.detalles is defined %}
                {% for detalle in alojamiento.detalles %}
                    {% set text = text ~ '   ‚Ä¢ ' ~ detalle ~ '\n' %}
                {% endfor %}
            {% endif %}
            {% set text = text ~ '\n' %}
        {% endfor %}
    {% endif %}

    {# -------------------- SERVICIOS CON ITINERARIO -------------------- #}
    {% if resumen.serviciosConTituloItinerario is defined %}
        {% for servicio in resumen.serviciosConTituloItinerario %}
            {% set text = text ~ 'üöå *' ~ servicio.tituloItinerario ~ '*\n' %}
            {% if servicio.fechaInicio is defined and object.file.catalogo != true %}
                {% if servicio.fechahorasdiferentes %}
                    {% for fecha in servicio.fechas %}
                        {% set text = text ~ 'üìÖ *' ~ fecha.fecha|date('d/m/Y') ~ '*\n' %}
                        {% for item in fecha.items %}
                            {% set text = text ~ '   ‚è∞ ' ~ item.fechahoraInicio|date('H:i') ~ ' ‚Äì ' ~ item.titulo ~ '\n' %}
                        {% endfor %}
                    {% endfor %}
                {% else %}
                    {% set text = text ~ '‚è∞ *Inicio*: ' ~ servicio.fechahoraInicio|date('d/m/Y H:i') ~ '\n' %}
                {% endif %}
            {% endif %}
            {% if servicio.duracionStr is defined %}
                {% set text = text ~ '‚è≥ *Duraci√≥n*: ' ~ servicio.duracionStr ~ '\n' %}
            {% endif %}
            {% for tipoTarifa in servicio.tipoTarifas %}
                {% set text = text ~ '‚úîÔ∏è *' ~ tipoTarifa.tituloTipotarifa ~ ':* ' %}
                {% for componente in tipoTarifa.componentes %}
                    {% set text = text ~ componente.titulo %}
                    {% if not loop.last %}
                        {% set text = text ~ ', ' %}
                    {% else %}
                        {% set text = text ~ '.' ~ '\n' %}
                    {% endif %}
                {% endfor %}
            {% endfor %}
            {% set text = text ~ '\n' %}
        {% endfor %}
    {% endif %}

    {# -------------------- OTROS SERVICIOS -------------------- #}
    {% if resumen.serviciosSinTituloItinerario is defined %}
        {% set text = text ~ '‚ûï *Otros servicios*\n' %}
        {% for tipoTarifa in resumen.serviciosSinTituloItinerario.tipoTarifas %}
            {% set text = text ~ '‚úîÔ∏è ' ~ tipoTarifa.tituloTipotarifa ~ ': ' %}
            {% for componente in tipoTarifa.componentes %}
                {% set text = text ~ componente.titulo %}
                {% if not loop.last %}
                    {% set text = text ~ ', ' %}
                {% else %}
                    {% set text = text ~ '.' ~ '\n' %}
                {% endif %}
            {% endfor %}
        {% endfor %}
        {% set text = text ~ '\n' %}
    {% endif %}

    {{ text|trim }}
{% endmacro %}