{# templates/reserva_reserva_admin/show__parte_galeria.html.twig #}
<div class="container-fluid hidden-print">
    <div class="row">

        {# 1) Resolver la característica (acepta 'c' o 'caracteristica') #}
        {% set car = (c is defined and c is not null) ? c
            : (caracteristica is defined and caracteristica is not null ? caracteristica : null) %}

        {% set medios = (car and attribute(car,'medios') is defined and car.medios is not null) ? car.medios : [] %}
        {% set total  = medios|length %}

        {% for archivo in medios %}
            {# 2) Orientación opcional (portrait/landscape) #}
            {% set orient = (attribute(archivo, 'aspectRatio') is defined and archivo.aspectRatio is not null)
                ? (archivo.aspectRatio < 1 ? 'portrait' : 'landscape')
                : '' %}

            <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
                <figure class="thumbnail thumbnail-fluid">
                    <a
                            href="{% if archivo.tipo == 'local' %}
                    {{ app.request.getSchemeAndHttpHost() ~ archivo.webPath|raw }}
                  {% else %}
                    {{ archivo.webPath|raw }}
                  {% endif %}"
                            {% if attribute(archivo, 'inModal') is defined and archivo.inModal %}
                                data-toggle="lightbox"
                                data-gallery="{{ car.unittipocaracteristica.nombre|default('galeria') }}"
                            {% else %}
                                target="_blank" rel="noopener noreferrer"
                            {% endif %}
                            aria-label="{{ attribute(archivo,'titulo') is defined ? archivo.titulo : 'Medio' }}"
                    >
                        <img
                                src="{% if archivo.tipo == 'local' %}
                      {{ app.request.getSchemeAndHttpHost() ~ archivo.webThumbPath|raw }}
                    {% else %}
                      {{ archivo.webThumbPath|raw }}
                    {% endif %}"
                                alt="{{ attribute(archivo,'titulo') is defined ? archivo.titulo : 'Medio sin título' }}"
                                class="img-responsive{% if attribute(archivo,'inModal') is defined and archivo.inModal %} in-modal{% endif %}{{ orient ? ' ' ~ orient : '' }}"
                                loading="lazy" decoding="async"
                        >
                        <figcaption class="caption">
                            <p class="small text-center" style="word-break: break-word;">
                                {{ attribute(archivo,'titulo') is defined ? archivo.titulo : '' }}
                            </p>
                        </figcaption>
                    </a>
                </figure>
            </div>
        {% endfor %}

        {# Mensaje opcional si no hay medios
    {% if total == 0 %}
      <div class="col-xs-12">
        <div class="alert alert-info m-t-10">No hay medios disponibles para esta característica.</div>
      </div>
    {% endif %}
        #}

    </div>
</div>
